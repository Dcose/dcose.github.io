---
title: 💾 内存管理
tags: [内存管理 💾]
---

### 内存分配

JavaScript 会在定义变量时为我们分配内存，怎么分配？

先知道 JavaScript 内存结构

- 栈结构
- 堆结构

**基本数据类型内存的分配**会在执行时，直接在栈空间进行分配

**复杂数据类型内存的分配**会在堆内存中开辟一块空间，并将这块空间的指针返回值给变量引用

### Garbage Collection (垃圾回收)

GC 怎么知道哪些对象是不再使用的呢？

- 引用计数
- 标记清除

### 内存泄露

- 意外的全局变量: 无法被回收
- 闭包: 会导致父级中的变量无法被释放
- 定时器: 未被正确关闭，导致所引用的外部变量无法被释放
- 事件监听: 没有正确销毁 (低版本浏览器可能出现)
- `dom`  引用: `dom`  元素被删除时，内存中的引用未被正确清空
