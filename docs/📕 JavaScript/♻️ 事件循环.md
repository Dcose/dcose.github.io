### Event Loop
---
> [!important] 
>  JavaScript 是单线程语言
>  Event Loop 是 JavaScript 的执行机制


JavaScript 是单线程语言，==为了防止执行阻塞==将任务分为**同步任务**和**异步任务**

**同步任务**
立即放入JS引擎（JS主线程），并原地等待结果

**异步任务**
先放入宿主环境（浏览器/Node），不必原地等待结果

执行流程中，遇到**同步任务**，会被主线程排到执行栈，遇到**异步任务**，会被主线程排到任务列队，**当主线程将执行栈中所有的代码执行完之后，主线程将会去查看任务队列是否有任务**，如果有，主线程依次从任务列队将**异步任务**加入执行栈执行，并以此循环。

**宏任务（macrotask）** 

宿主（浏览器/Node）发起
`script(代码块)、setTimeout、setInterval、UI 渲染、 I/O、postMessage、 MessageChannel、setImmediate(Node.js 环境)`

**微任务（microtask）**

JS引擎发起
`Promise、 MutaionObserver、process.nextTick(Node.js环境）`

> [!danger] 
> 宏任务 --> 所有微任务 --> 宏任务
> 
